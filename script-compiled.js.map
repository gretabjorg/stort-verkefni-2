{"version":3,"sources":["script.js"],"names":[],"mappings":"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","file":"script-compiled.js","sourcesContent":["/*eslint linebreak-style: [\"error\", \"windows\"]*/\r\n\r\nclass Myndbandaleiga {\r\n\r\n  // Hleður inn thumbnails: poster, title, date, undir hverju category fyrir sig.\r\n  // TODO: Bua til videos ut fra videos.json\r\n  // TODO: láta controls takka virka á spilað video.\r\n\r\n  load() {\r\n    this.container = document.querySelector('main');\r\n    this.categories = [];\r\n    this.videos = [];\r\n    this.loadVideos();\r\n  }\r\n\r\n  reiknaDagsetningu(milliseconds) {\r\n    const days = Math.floor(milliseconds / (1000 * 60 * 60 * 24));\r\n\r\n    if (days < 7) {\r\n      return `${days} dögu`;\r\n    } else if (days < 30) {\r\n      const weeks = Math.round(milliseconds / (1000 * 60 * 60 * 24 * 7));\r\n      if (weeks === 1) {\r\n        return `${weeks} viku`;\r\n      }\r\n      return `${weeks} vikum`;\r\n    } else if (days < 365) {\r\n      const month = Math.round(milliseconds / (1000 * 60 * 60 * 24 * 30));\r\n      if (month === 1) {\r\n        return `${month} mánuði`;\r\n      }\r\n      return `${month} mánuðum`;\r\n    }\r\n    const year = Math.round(milliseconds / (1000 * 60 * 60 * 24 * 365));\r\n    if (year === 1) {\r\n      return `${year} ári`;\r\n    }\r\n    return `${year} árum`;\r\n  }\r\n\r\n  videoLength(time) {\r\n    var hours = ~~(time / 3600);\r\n    var mins = ~~((time % 3600) / 60);\r\n    var secs = time % 60;\r\n\r\n    var ret = \"\";\r\n\r\n    if (hours > 0) {\r\n      ret += \"\" + hours + \":\" + (mins < 10 ? \"0\" : \"\");\r\n    }\r\n\r\n    ret += \"\" + mins + \":\" + (secs < 10 ? \"0\" : \"\");\r\n    ret += \"\" + secs;\r\n    return ret;\r\n  }\r\n\r\n  // Býr til category elements í HTML.\r\n\r\n  createVideoCategory(title, videos) {\r\n    const categoryDiv = document.createElement('div');\r\n    const category = document.createElement('h2');\r\n    const posterDiv = document.createElement('div');\r\n\r\n    categoryDiv.className = 'video__category';\r\n    posterDiv.className = 'video__posters';\r\n    category.textContent = title;\r\n\r\n    categoryDiv.appendChild(category);\r\n\r\n    for (const key in videos) {\r\n      const video = videos[key];\r\n\r\n      posterDiv.appendChild(this.createPoster(video.poster, video.title, 'Fyrir ' +\r\n        this.reiknaDagsetningu(Date.now() - video.created) + ' síðan', this.videoLength(video.duration),\r\n        video.id));\r\n    }\r\n\r\n    categoryDiv.appendChild(posterDiv);\r\n    this.container.appendChild(categoryDiv);\r\n  }\r\n\r\n  // Býr til poster elements i HTML.\r\n\r\n  createPoster(image, title, date, time, videoId) {\r\n    const videoPoster = document.createElement('div');\r\n    const posterImg = document.createElement('img');\r\n    const videoTitle = document.createElement('span');\r\n    const breakElement = document.createElement('br');\r\n    const videoDate = document.createElement('span');\r\n    const videoDuration = document.createElement('p');\r\n\r\n    videoPoster.className = 'video__poster';\r\n    posterImg.className = 'poster__img';\r\n    videoTitle.className = 'video__title';\r\n    videoDate.className = 'video__date';\r\n    videoDuration.className = 'video__duration';\r\n\r\n    posterImg.src = image;\r\n    videoTitle.textContent = title;\r\n    videoDate.textContent = date;\r\n    videoDuration.textContent = time;\r\n\r\n    videoPoster.appendChild(videoDuration);\r\n    videoPoster.appendChild(posterImg);\r\n    videoPoster.appendChild(videoTitle);\r\n    videoPoster.appendChild(breakElement);\r\n    videoPoster.appendChild(videoDate);\r\n\r\n    const target = posterImg;\r\n    const wrap = document.createElement('a');\r\n    wrap.setAttribute('href', 'video.html?id=' + videoId);\r\n\r\n    target.parentNode.replaceChild(wrap, target);\r\n    wrap.appendChild(target);\r\n\r\n    return videoPoster;\r\n  }\r\n\r\n  loadVideos() {\r\n    const request = new XMLHttpRequest();\r\n\r\n    request.open('GET', './videos.json', true);\r\n    request.onload = this.parseVideosJson.bind(this);\r\n\r\n    request.onerror = function() {\r\n      console.error('Óþekkt villa');\r\n      results.appendChild(document.createTextNode('Óþekkt villa'));\r\n    }\r\n\r\n    request.send();\r\n  }\r\n\r\n  parseVideosJson(e) {\r\n    const request = e.target;\r\n    if (request.status >= 200 && request.status < 400) {\r\n      const data = JSON.parse(request.response);\r\n      this.categories = data.categories;\r\n\r\n      // Geymum video i this.videos array\r\n      for (const videoKey in data.videos) {\r\n        this.videos[data.videos[videoKey].id] = data.videos[videoKey];\r\n      }\r\n\r\n      // Buum til category i html fyrir hvert video category\r\n      for (const i in data.categories) {\r\n        const videoArray = [];\r\n        for (const j in data.categories[i].videos) {\r\n          videoArray.push(this.videos[data.categories[i].videos[j]]);\r\n        }\r\n        this.createVideoCategory(data.categories[i].title, videoArray);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const myndbond = new Myndbandaleiga();\r\n  myndbond.load();\r\n});\r\n"]}